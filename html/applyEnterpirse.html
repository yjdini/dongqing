<!DOCTYPE html>
<html class="um landscape min-width-240px min-width-320px min-width-480px min-width-768px min-width-1024px">
	<head>
		<title></title>
		<meta charset="utf-8">
		<meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<link rel="stylesheet" href="../css/ui-box.css">
		<link rel="stylesheet" href="../css/ui-base.css">
		<link rel="stylesheet" href="../css/ui-color.css">
		<link rel="stylesheet" href="../css/appcan.icon.css">
		<link rel="stylesheet" href="../css/appcan.control.css">
		<style type="text/css">
			.b-gra3 {
				border-color: #d8d8d8;
			}
			.uinn-a6 {
				padding: 1em 0.65em 0 0.65em;
			}
			.t-gra4 {
				color: #8c8c8c;
			}
			.uinn-a1 {
				padding: 0.625em;
			}
			.uinn-a7 {
				padding: 0 0.625em;
			}
			.c-wh {
				background-color: #FFF;
			}
			.umar-at1 {
				margin-top: 0.625em;
			}
			.uinn-at1 {
				padding-top: 1em;
			}
			input.ub-f1 {
				padding-left: 2em;
			}
			.sc-bg {
				background-color: #F4F4F4;
			}
			.lis {
				padding: 0.5em 0.75em;
			}
			.dot {
				font-size: 0.4em !important;
				color: #FF0000;
				top: 0.2em;
				position: absolute;
				margin-left: 0.4em;
			}
			.ulev-app1 span {
				width: 1.1em;
				height: 1.1em;
				margin-left: 0.6em;
				border: 1px;
				border-style: solid;
				border-radius: 1.1em;
				background-color: red;
				position: relative;
				top: -4.6em;
				left: 1.46em;
			}
		</style>
	</head>
	<body class="um-vp bc-bg" ontouchstart>
		<div class="ub ub-ver" style="margin-left: 1.25em;margin-right: 1em;margin-top: 1em;">
			<div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac">
				<div class="ulev-app1 umw4">
					公司的名称
				</div>
				<div class="ub ub-ac umh5 ub-f1">
					<div class="uinput ub ub-f1">
						<input placeholder="" class="input1" type="text"  id="companyName" style="padding-left:10px"/>
					</div>
				</div>
			</div>
			<div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1">
				<div class="ulev-app1 umw4">
					公司组织机构代码
				</div>
				<div class="ub ub-ac umh5 ub-f1">
					<div class="uinput ub ub-f1">
						<input placeholder="" class="input1 selectIsNo" type="text"   id="companyCode" style="padding-left:10px"/>
					</div>
				</div>
			</div>
			<div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1">
				<div class="ulev-app1 umw4">
					公司法人
				</div>
				<div class="ub ub-ac umh5 ub-f1">
					<div class="uinput ub ub-f1">
						<input placeholder="" class="input1" type="text"  id="companyLegal" style="padding-left:10px"/>
					</div>
				</div>
			</div>
			<div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1">
				<div class="ulev-app1 umw4">
					组织机构名称
				</div>
				<div class="ub ub-ac umh5 ub-f1">
					<div class="uinput ub ub-f1">
						<input placeholder="" class="input1" type="text"  id="companyMechanismName" style="padding-left:10px"/>
					</div>
				</div>
			</div>
			<div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1">
				<div class="ulev-app1 umw4">
					机构地址
				</div>
				<div class="ub ub-ac umh5 ub-f1">
					<div class="uinput ub ub-f1">
						<input placeholder="" class="input1" type="text"  id="conpanyAddress" style="padding-left:10px"/>
					</div>
				</div>
			</div>
			<div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1">
				<div class="ulev-app1 umw4">
					公司地址
				</div>
				<div class="ub ub-ac umh5 ub-f1">
					<div class="uinput ub ub-f1">
						<input placeholder="" class="input1" type="text"  id="conpanyPhone" style="padding-left:10px"/>
					</div>
				</div>
			</div>
			<div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1">
				<div class="ulev-app1 umw4">
					行业
				</div>
				<div class="ub ub-ac umh5 ub-f1">
					<div class="uinput ub ub-f1">
						<input placeholder="" readonly="" class="input1" type="text"  id="hangye" style="padding-left:10px"/>
					</div>
				</div>
			</div>
			<div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1" id="img1">
				添加企业照片1
			</div>
			<div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1" id="img2">
				添加企业照片1
			</div>
			<div class="uinn-at1">
				<div class="btn ub ub-ac bc-text-head ub-pc bc-btn"  id="btn" style="border-radius: 10px;">
					<div class="uinn3 fa  umh1 umw1"></div>
					保存
				</div>
			</div>
		</div>
		<script src="../script/api.js"></script>
		<script src="../script/jquery-1.9.1.min.js"></script>
		<script src="../script/app.js"></script>
		<script >
			var token = "";
			var img1 = "";
			var img2 = "";
			var name = "";
			var hangye = [];
			var hangyeValue = [];
			apiready = function() {
				var pageParame = api.pageParam;
				name = pageParame.name;
				var parames = {
					values : {
						type : "3" //表示行业
					}
				}
				doAjax(DICTIONARYCONTROLLER, "post", parames, function(data) {
					var dictionaries = data.dictionaries;
					for (var i = 0; i < dictionaries.length; i++) {
						hangyeValue.push(dictionaries[i].dictionaryName);
						hangye.push(dictionaries[i].dictionaryId);
					}
				}, function(data) {
				});
				api.getPrefs({
					key : 'token'
				}, function(ret, err) {
					token = ret.value;
				});
				$(".uinn-at1").click(function() {
					if (img1 == "" || img2 == "") {
						api.toast({
							msg : '请上传照片',
							duration : 2000,
							location : 'middle'
						});
					} else {
						var parame = {
							values : {
								"companyName" : $("#companyName").val(),
								"companyCode" : $("#companyCode").val(),
								"companyLegal" : $("#companyLegal").val(),
								"companyMechanismName" : $("#companyMechanismName").val(),
								"conpanyAddress" : $("#conpanyAddress").val(),
								"conpanyPhone" : $("#conpanyPhone").val(),
								"token" : token,
								"parame1" : name,
								"parame2" : $("#hangye").attr("readVal")
							},
							files : {
								companyCertifyUrl1 : img1,
								companyCertifyUrl2 : img2
							}
						}
						doAjax(APPLYENTERPIRSE, "POST", parame, function(data) {
							var flag = data.flag;
							if (flag == "true") {
								api.alert({
									"title" : "提示",
									"msg" : "上传企业信息成功，请等待审核"
								}, function(ret, err) {
									api.closeWin({
									});
								});
							}
						}, function() {
						});
					}
				});
				$("#img1").click(function() {
					upLoadFile("#img1");
				});
				$("#img2").click(function() {
					upLoadFile("#img2");
				});
				
				$("#hangye").click(function() {
					api.actionSheet({
						title : '菜单',
						cancelTitle : '取消',
						buttons : hangyeValue
					}, function(ret, err) {
						if (ret.buttonIndex <= hangyeValue.length) {
							$("#hangye").val(hangyeValue[ret.buttonIndex]);
							$("#hangye").attr("readVal", hangye[ret.buttonIndex]);
						}
					});
				});
			}
			function upLoadFile(obj) {
				api.actionSheet({
					title : '菜单',
					cancelTitle : '取消',
					buttons : ['拍照', '相册']
				}, function(ret, err) {
					var sourceType = "album";
					if (ret.buttonIndex == 1) {
						sourceType = 'camera'
					} else if (ret.buttonIndex == 2)
						( sourceType = 'album'
						)
					if (ret.buttonIndex != 3) {
						api.getPicture({
							sourceType : sourceType,
							encodingType : 'jpg',
							mediaValue : 'pic',
							destinationType : 'url',
							allowEdit : true,
							quality : 100,
							targetWidth : 200,
							targetHeight : 200,
							saveToPhotoAlbum : false
						}, function(ret, err) {
							if (ret) {
								imgsrc = ret.data;
								$(obj).html("<img src='" + imgsrc + "'>");
								if (obj == "#img1") {
									img1 = imgsrc;
								} else {
									img2 = imgsrc;
								}
							} else {
								api.alert({
									msg : err.msg
								});
							}
						});
					}
				});
			}
		</script>
	</body>
</html>